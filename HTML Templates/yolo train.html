<!DOCTYPE html>
<html>
<head>
    <title>Train YOLOv8</title>
</head>
<body>
    <h1>Train YOLOv8</h1>
    
    <form id="train-form" enctype="multipart/form-data">
        <label for="dataset-path">Dataset Path:</label>
        <input type="text" id="dataset-path" name="dataset_path"><br><br>
        
        <label for="yaml-file">Upload YAML File:</label>
        <input type="file" id="yaml-file" name="yaml_file"><br><br>

        <label>Select Training Speed:</label><br>
        <input type="radio" id="fast-training" name="training_speed" value="fast" checked>
        <label for="fast-training">Fast Training</label><br>
        
        <input type="radio" id="slow-training" name="training_speed" value="slow">
        <label for="slow-training">Slow Training</label><br><br>

        <button type="submit">Start Training</button>
    </form>
    
    <div id="result"></div>
    
    <script>
        document.getElementById('train-form').addEventListener('submit', function(event) {
            event.preventDefault();
            
            var formData = new FormData();
            formData.append('dataset_path', document.getElementById('dataset-path').value);
            formData.append('yaml_file', document.getElementById('yaml-file').files[0]);

            // Get the selected training speed
            formData.append('training_speed', document.querySelector('input[name="training_speed"]:checked').value);
            
            fetch('http://127.0.0.1:8000/train/', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.status === 'success') {
                    document.getElementById('result').innerHTML = 'Training started. Check your terminal for progress.';
                } else {
                    document.getElementById('result').innerHTML = 'Error: ' + data.message;
                }
            })
            .catch(error => {
                document.getElementById('result').innerHTML = 'An error occurred: ' + error;
            });
        });
    </script>
</body>
</html>
